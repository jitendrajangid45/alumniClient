<h1>Jobs</h1>
<div class="card">
    <div class="card-body">
        <p-toast></p-toast>
        <p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>
        <p-tabView styleClass="tabview-custom" (onChange)="onTabChange($event)">
            <p-tabPanel>
                <ng-template pTemplate="header">
                    <i class="pi pi-calendar"></i>
                    <span> Jobs Added By You</span>
                </ng-template>
                <div class="job pt-2" *ngIf="viewJobDetails === false">
                    <p>Total Jobs Posted By You :{{this.totalItems}} </p>
                    <div class="search">
                        <div class="search-container">
                            <input type="text" name="search" placeholder="Search..." class="search-input"
                                [(ngModel)]="filterText" (input)="filterData()">
                            <a class="search-btn">
                                <i class="fas fa-search"></i>
                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6" *ngFor="let data of jobDetails">
                            <div class="card" (click)="viewDescription(data)">
                                <div class="card-data">
                                    <div class="row">
                                        <p class="card-title">{{ data.jobTitle }}</p>
                                        <p><i class="bi bi-building"></i> {{ data.companyName
                                            }}</p>
                                    </div>
                                    <div class="row">
                                        <p class="col"><i class="bi bi-briefcase"></i> {{ data.experienceFrom }} -
                                            {{data.experienceTo}}</p>
                                        <p class="col"><i class="bi bi-currency-rupee"></i> {{ data.salaryPackage }}
                                        </p>
                                        <p class="col"><i class="bi bi-geo-alt"></i> {{ data.jobLocation }}</p>
                                    </div>
                                    <div class="row">
                                        {{ data.timeAgo }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-content-center">
                            <app-pagination [currentPage]="currentPage" [totalPages]="totalPages"
                                (pageChanged)="onPageChanged($event)"></app-pagination>
                        </div>
                    </div>
                </div>
                <div *ngIf="viewJobDetails">
                    <button type="button" (click)="backToJob()" class="btn btn-outline-success btn-rounded btn-sm px-4">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-data">
                                    <div class="row">
                                        <p class="card-title">{{ this.viewJobDesc.jobTitle}}</p>
                                        <p style="margin-top: -10px;"><i class="bi bi-building"></i> {{
                                            this.viewJobDesc.companyName }}</p>
                                    </div>
                                    <div class="row">
                                        <p class="col"><i class="bi bi-briefcase"></i> {{
                                            this.viewJobDesc.experienceFrom }} -
                                            {{this.viewJobDesc.experienceTo}}</p>
                                        <p class="col"><i class="bi bi-currency-rupee"></i> {{
                                            this.viewJobDesc.salaryPackage }}
                                        </p>
                                        <p class="col"><i class="bi bi-geo-alt"></i> {{ this.viewJobDesc.jobLocation }}
                                        </p>
                                    </div>
                                    <div class="row">
                                        {{ this.viewJobDesc.timeAgo }}
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-data">
                                    <div class="row">
                                        <p style="font-weight: 700;">Visible To :</p>
                                        <p>{{this.viewJobDesc.visibleTo}}</p>
                                    </div>
                                    <div class="row" style="margin-top: 15px;">
                                        <p style="font-weight: 700;">Description</p>
                                        <div [innerHtml]="sanitizedHtml"></div>
                                    </div>
                                    <div class="row" style="margin-top: 15px;">
                                        <p style="font-weight: 700;">Skills</p>
                                        <p>{{this.viewJobDesc.skills}}</p>
                                    </div>
                                    <div class="row">
                                        <p style="font-weight: 700;">Education/Qualification</p>
                                        <p>{{this.viewJobDesc.education}}</p>
                                    </div>
                                    <div class="row">
                                        <p class="col-md-4" style="font-weight: 700;">Role: </p>
                                        <p class="col-md-6" style="font-size: 14px;">{{this.viewJobDesc.role}}</p>
                                    </div>
                                    <div class="row" style="margin-top: -15px;">
                                        <p class="col-md-4" style="font-weight: 700;">Industry Type: </p>
                                        <p class="col-md-6" style="font-size: 14px;">{{this.viewJobDesc.industryType}}
                                        </p>
                                    </div>
                                    <div class="row" style="margin-top: -15px;">
                                        <p class="col-md-4" style="font-weight: 700;">Department: </p>
                                        <p class="col-md-6" style="font-size: 14px;">{{this.viewJobDesc.department}}</p>
                                    </div>
                                    <div class="row" style="margin-top: -15px;">
                                        <p class="col-md-4" style="font-weight: 700;">Employment Type: </p>
                                        <p class="col-md-6" style="font-size: 14px;">{{this.viewJobDesc.employmentType}}
                                        </p>
                                    </div>
                                    <button type="button" (click)="jobDelete(viewJobDesc.jobId)"
                                        class="btn btn-outline-danger btn-rounded btn-sm px-2">
                                        <i class="far fa-trash-alt mt-0"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card">
                                <h3 class="card-header text-center font-weight-bold text-uppercase py-4">
                                    Job Application
                                </h3>
                                <div class="card-body">
                                    <div id="table" class="table-editable">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <!-- Search bar -->
                                                <div class="input-group mb-3">
                                                    <input type="text" class="form-control" placeholder="Search..."
                                                        [(ngModel)]="filterAppliedTextSelf" #appliedOthers
                                                        (input)="filterAppliedDataSelf()" aria-label="Search"
                                                        aria-describedby="basic-addon2">
                                                </div>
                                            </div>
                                            <div class="col-md-3 text-left"></div>
                                        </div><br>
                                        <table *ngIf="applicantData?.length !== 0"
                                            class="table table-bordered table-responsive-md table-striped text-center">
                                            <thead>
                                                <tr>
                                                    <th class="text-center">Sr. No</th>
                                                    <th class="text-center">Email</th>
                                                    <th class="text-center">Full Name</th>
                                                    <th class="text-center">Skills</th>
                                                    <th class="text-center">Note For recruiter</th>
                                                    <th class="text-center">View Resume</th>
                                                    <th class="text-center">Applied At</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let data of applicantData;let i = index">
                                                    <td class="pt-3-half">{{ i + 1 }}</td>
                                                    <td class="pt-3-half">{{data.applicantEmail}}</td>
                                                    <td class="pt-3-half">{{data.applicantFullName}}</td>
                                                    <td class="pt-3-half">{{data.applicantRelevantSkills}}</td>
                                                    <td class="pt-3-half">{{data.noteForRecruiter}}</td>
                                                    <td class="pt-3-half">
                                                        <button type="button"
                                                            (click)="viewResumeDocument(data.applicantResumePath)"
                                                            class="btn btn-outline-success btn-rounded btn-sm px-2">
                                                            <i class="fas fa-regular fa-file-pdf"></i>
                                                        </button>
                                                    </td>
                                                    <td class="pt-3-half">{{data.createdAt}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div *ngIf="applicantData?.length === 0" class="no-applicants-message">
                                            No Data Found!
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </p-tabPanel>
            <p-tabPanel>
                <ng-template pTemplate="header">
                    <i class="pi pi-calendar"></i>
                    <span> Jobs Added By Others</span>
                </ng-template>
                <p-tabView (onChange)="verifiedUnverifiedTab($event)">
                    <!-- <p>Total Jobs Posted By Others :{{this.totalJobCount}} </p> -->
                    <p-tabPanel header="Unverified Jobs">
                        <div class="job pt-2" *ngIf="viewOtherJobDetails === false">
                            <div>
                                <div class="search">
                                    <div class="search-container">
                                        <input type="text" name="search" placeholder="Search..."
                                            [(ngModel)]="filterTextOthers" (input)="filterDataOthers()"
                                            class="search-input">
                                        <a class="search-btn">
                                            <i class="fas fa-search"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 md:col-6" *ngFor="let data of jobDetailsOthers">
                                        <div class="card" (click)="viewOtherJobDescription(data)">
                                            <div class="card-data">
                                                <div class="row">
                                                    <p class="card-title">{{ data.jobTitle }}</p>
                                                    <p style="margin-top: -10px;"><i class="bi bi-building"></i> {{
                                                        data.companyName }}</p>
                                                </div>
                                                <div class="row">
                                                    <p class="col"><i class="bi bi-briefcase"></i> {{
                                                        data.experienceFrom }} -
                                                        {{data.experienceTo}}</p>
                                                    <p class="col"><i class="bi bi-currency-rupee"></i> {{
                                                        data.salaryPackage }}
                                                    </p>
                                                    <p class="col"><i class="bi bi-geo-alt"></i> {{ data.jobLocation
                                                        }}
                                                    </p>
                                                </div>
                                                <div class="row">
                                                    {{ data.timeAgo }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <app-pagination [currentPage]="currentPage" [totalPages]="totalPagesOthers"
                                        (pageChanged)="onPageChangedOthers($event)"></app-pagination>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="viewOtherJobDetails">
                            <div class="row">
                                <div class="col">
                                    <button type="button" (click)="backToJob()"
                                        class="btn btn-outline-success btn-rounded btn-sm px-4">
                                        <i class="fas fa-arrow-left"></i></button>
                                </div>
                                <div class="col">
                                    <button type="button" (click)="verifyJob(this.viewOtherJobDesc?.jobId)"
                                        class="btn btn-outline-success btn-rounded btn-sm px-4">Verify
                                        this Job
                                    </button>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-data">
                                            <div class="row">
                                                <p class="card-title">{{ this.viewOtherJobDesc.jobTitle}}</p>
                                                <p style="margin-top: -10px;"><i class="bi bi-building"></i> {{
                                                    this.viewOtherJobDesc.companyName }}</p>
                                            </div>
                                            <div class="row">
                                                <p class="col"><i class="bi bi-briefcase"></i> {{
                                                    this.viewOtherJobDesc.experienceFrom }} -
                                                    {{this.viewOtherJobDesc.experienceTo}}</p>
                                                <p class="col"><i class="bi bi-currency-rupee"></i> {{
                                                    this.viewOtherJobDesc.salaryPackage }}
                                                </p>
                                                <p class="col"><i class="bi bi-geo-alt"></i> {{
                                                    this.viewOtherJobDesc.jobLocation }}
                                                </p>
                                            </div>
                                            <div class="row">
                                                {{ this.viewOtherJobDesc.timeAgo }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-data">
                                            <div class="row">
                                                <p style="font-weight: 700;">Visible To :</p>
                                                <p>{{this.viewOtherJobDesc.visibleTo}}</p>
                                            </div>
                                            <div class="row" style="margin-top: 15px;">
                                                <p style="font-weight: 700;">Description</p>
                                                <div [innerHtml]="sanitizedHtml"></div>
                                            </div>
                                            <div class="row" style="margin-top: 15px;">
                                                <p style="font-weight: 700;">Skills</p>
                                                <p>{{this.viewOtherJobDesc.skills}}</p>
                                            </div>
                                            <div class="row">
                                                <p style="font-weight: 700;">Education/Qualification</p>
                                                <p>{{this.viewOtherJobDesc.education}}</p>
                                            </div>
                                            <div class="row">
                                                <p class="col-md-4" style="font-weight: 700;">Role: </p>
                                                <p class="col-md-6" style="font-size: 14px;">
                                                    {{this.viewOtherJobDesc.role}}</p>
                                            </div>
                                            <div class="row" style="margin-top: -15px;">
                                                <p class="col-md-4" style="font-weight: 700;">Industry Type: </p>
                                                <p class="col-md-6" style="font-size: 14px;">
                                                    {{this.viewOtherJobDesc.industryType}}</p>
                                            </div>
                                            <div class="row" style="margin-top: -15px;">
                                                <p class="col-md-4" style="font-weight: 700;">Department: </p>
                                                <p class="col-md-6" style="font-size: 14px;">
                                                    {{this.viewOtherJobDesc.department}}</p>
                                            </div>
                                            <div class="row" style="margin-top: -15px;">
                                                <p class="col-md-4" style="font-weight: 700;">Employment Type: </p>
                                                <p class="col-md-6" style="font-size: 14px;">
                                                    {{this.viewOtherJobDesc.employmentType}}</p>
                                            </div>
                                            <button type="button" (click)="jobDelete(viewOtherJobDesc.jobId)"
                                                class="btn btn-outline-danger btn-rounded btn-sm px-2">
                                                <i class="far fa-trash-alt mt-0"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card">
                                        <h3 class="card-header text-center font-weight-bold text-uppercase py-4">
                                            Job Application
                                        </h3>
                                        <div class="card-body">
                                            <div id="table" class="table-editable">
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <!-- Search bar -->
                                                        <div class="input-group mb-3">
                                                            <input type="text" class="form-control"
                                                                placeholder="Search..."
                                                                [(ngModel)]="filterAppliedTextOthers"
                                                                (input)="filterAppliedDataOthers()" aria-label="Search"
                                                                aria-describedby="basic-addon2">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3 text-left"></div>
                                                </div><br>
                                                <table *ngIf="applicantData?.length !== 0"
                                                    class="table table-bordered table-responsive-md table-striped text-center">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center">Sr. No</th>
                                                            <th class="text-center">Email</th>
                                                            <th class="text-center">Full Name</th>
                                                            <th class="text-center">Skills</th>
                                                            <th class="text-center">Note For recruiter</th>
                                                            <th class="text-center">View Resume</th>
                                                            <th class="text-center">Applied At</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let data of applicantData;let i = index">
                                                            <td class="pt-3-half">{{ i + 1 }}</td>
                                                            <td class="pt-3-half">{{data.applicantEmail}}</td>
                                                            <td class="pt-3-half">{{data.applicantFullName}}</td>
                                                            <td class="pt-3-half">{{data.applicantRelevantSkills}}</td>
                                                            <td class="pt-3-half">{{data.noteForRecruiter}}</td>
                                                            <td class="pt-3-half">
                                                                <button type="button"
                                                                    (click)="viewResumeDocument(data.applicantResumePath)"
                                                                    class="btn btn-outline-success btn-rounded btn-sm px-2">
                                                                    <i class="fas fa-regular fa-file-pdf"></i>
                                                                </button>
                                                            </td>
                                                            <td class="pt-3-half">{{data.createdAt}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div *ngIf="applicantData?.length === 0" class="no-applicants-message">
                                                    No Data Found!
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Verified Jobs">
                        <div class="job pt-2" *ngIf="viewOtherJobDetails === false">
                            <div>
                                <div class="search">
                                    <div class="search-container">
                                        <input type="text" name="search" placeholder="Search..."
                                            [(ngModel)]="filterTextOthers" (input)="filterDataOthers()"
                                            class="search-input">
                                        <a class="search-btn">
                                            <i class="fas fa-search"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6" *ngFor="let data of jobDetailsOthers">
                                        <div class="card" (click)="viewOtherJobDescription(data)">
                                            <div class="card-data">
                                                <div class="row">
                                                    <p class="card-title">{{ data.jobTitle }}</p>
                                                    <p style="margin-top: -10px;"><i class="bi bi-building"></i> {{
                                                        data.companyName }}</p>
                                                </div>
                                                <div class="row">
                                                    <p class="col"><i class="bi bi-briefcase"></i> {{
                                                        data.experienceFrom }} -
                                                        {{data.experienceTo}}</p>
                                                    <p class="col"><i class="bi bi-currency-rupee"></i> {{
                                                        data.salaryPackage }}
                                                    </p>
                                                    <p class="col"><i class="bi bi-geo-alt"></i> {{ data.jobLocation
                                                        }}
                                                    </p>
                                                </div>
                                                <div class="row">
                                                    {{ data.timeAgo }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <app-pagination [currentPage]="currentPage" [totalPages]="totalPagesOthers"
                                        (pageChanged)="onPageChangedOthers($event)"></app-pagination>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="viewOtherJobDetails">
                            <button type="button" (click)="backToJob()"
                                class="btn btn-outline-success btn-rounded btn-sm px-4">
                                <i class="fas fa-arrow-left"></i></button>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-data">
                                            <div class="row">
                                                <p class="card-title">{{ this.viewOtherJobDesc.jobTitle}}</p>
                                                <p style="margin-top: -10px;"><i class="bi bi-building"></i> {{
                                                    this.viewOtherJobDesc.companyName }}</p>
                                            </div>
                                            <div class="row">
                                                <p class="col"><i class="bi bi-briefcase"></i> {{
                                                    this.viewOtherJobDesc.experienceFrom }} -
                                                    {{this.viewOtherJobDesc.experienceTo}}</p>
                                                <p class="col"><i class="bi bi-currency-rupee"></i> {{
                                                    this.viewOtherJobDesc.salaryPackage }}
                                                </p>
                                                <p class="col"><i class="bi bi-geo-alt"></i> {{
                                                    this.viewOtherJobDesc.jobLocation }}
                                                </p>
                                            </div>
                                            <div class="row">
                                                {{ this.viewOtherJobDesc.timeAgo }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-data">
                                            <div class="row">
                                                <p style="font-weight: 700;">Visible To :</p>
                                                <p>{{this.viewOtherJobDesc.visibleTo}}</p>
                                            </div>
                                            <div class="row" style="margin-top: 15px;">
                                                <p style="font-weight: 700;">Description</p>
                                                <div [innerHtml]="sanitizedHtml"></div>
                                            </div>
                                            <div class="row" style="margin-top: 15px;">
                                                <p style="font-weight: 700;">Skills</p>
                                                <p>{{this.viewOtherJobDesc.skills}}</p>
                                            </div>
                                            <div class="row">
                                                <p style="font-weight: 700;">Education/Qualification</p>
                                                <p>{{this.viewOtherJobDesc.education}}</p>
                                            </div>
                                            <div class="row">
                                                <p class="col-md-4" style="font-weight: 700;">Role: </p>
                                                <p class="col-md-6" style="font-size: 14px;">
                                                    {{this.viewOtherJobDesc.role}}</p>
                                            </div>
                                            <div class="row" style="margin-top: -15px;">
                                                <p class="col-md-4" style="font-weight: 700;">Industry Type: </p>
                                                <p class="col-md-6" style="font-size: 14px;">
                                                    {{this.viewOtherJobDesc.industryType}}</p>
                                            </div>
                                            <div class="row" style="margin-top: -15px;">
                                                <p class="col-md-4" style="font-weight: 700;">Department: </p>
                                                <p class="col-md-6" style="font-size: 14px;">
                                                    {{this.viewOtherJobDesc.department}}</p>
                                            </div>
                                            <div class="row" style="margin-top: -15px;">
                                                <p class="col-md-4" style="font-weight: 700;">Employment Type: </p>
                                                <p class="col-md-6" style="font-size: 14px;">
                                                    {{this.viewOtherJobDesc.employmentType}}</p>
                                            </div>
                                            <button type="button" (click)="jobDelete(viewOtherJobDesc.jobId)"
                                                class="btn btn-outline-danger btn-rounded btn-sm px-2">
                                                <i class="far fa-trash-alt mt-0"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card">
                                        <h3 class="card-header text-center font-weight-bold text-uppercase py-4">
                                            Job Application
                                        </h3>
                                        <div class="card-body">
                                            <div id="table" class="table-editable">
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <!-- Search bar -->
                                                        <div class="input-group mb-3">
                                                            <input type="text" class="form-control"
                                                                placeholder="Search..."
                                                                [(ngModel)]="filterAppliedTextOthers"
                                                                (input)="filterAppliedDataOthers()" aria-label="Search"
                                                                aria-describedby="basic-addon2">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3 text-left"></div>
                                                </div><br>
                                                <table *ngIf="applicantData?.length !== 0"
                                                    class="table table-bordered table-responsive-md table-striped text-center">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center">Sr. No</th>
                                                            <th class="text-center">Email</th>
                                                            <th class="text-center">Full Name</th>
                                                            <th class="text-center">Skills</th>
                                                            <th class="text-center">Note For recruiter</th>
                                                            <th class="text-center">View Resume</th>
                                                            <th class="text-center">Applied At</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let data of applicantData;let i = index">
                                                            <td class="pt-3-half">{{ i + 1 }}</td>
                                                            <td class="pt-3-half">{{data.applicantEmail}}</td>
                                                            <td class="pt-3-half">{{data.applicantFullName}}</td>
                                                            <td class="pt-3-half">{{data.applicantRelevantSkills}}
                                                            </td>
                                                            <td class="pt-3-half">{{data.noteForRecruiter}}</td>
                                                            <td class="pt-3-half">
                                                                <button type="button"
                                                                    (click)="viewResumeDocument(data.applicantResumePath)"
                                                                    class="btn btn-outline-success btn-rounded btn-sm px-2">
                                                                    <i class="fas fa-regular fa-file-pdf"></i>
                                                                </button>
                                                            </td>
                                                            <td class="pt-3-half">{{data.createdAt}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div *ngIf="applicantData?.length === 0" class="no-applicants-message">
                                                    No Data Found!
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </p-tabPanel>
                </p-tabView>
            </p-tabPanel>
        </p-tabView>
    </div>
</div>